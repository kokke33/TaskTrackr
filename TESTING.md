# Testing Guide - TaskTrackr

## ğŸ§ª ãƒ†ã‚¹ãƒˆã‚¤ãƒ³ãƒ•ãƒ©æ¦‚è¦

TaskTrackrãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ã¯åŒ…æ‹¬çš„ãªãƒ†ã‚¹ãƒˆã‚¤ãƒ³ãƒ•ãƒ©ãŒæ§‹ç¯‰ã•ã‚Œã¦ã„ã¾ã™ã€‚

### æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯
- **ãƒ†ã‚¹ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯**: Vitest 3.2.4
- **Reactãƒ†ã‚¹ãƒˆ**: React Testing Library 16.3.0
- **DOMç’°å¢ƒ**: Happy DOM 18.0.1
- **ãƒ¢ãƒƒã‚­ãƒ³ã‚°**: MSW 2.10.4 (Mock Service Worker)
- **APIãƒ†ã‚¹ãƒˆ**: Supertest 7.1.4
- **ã‚«ãƒãƒ¬ãƒƒã‚¸**: @vitest/coverage-v8 3.2.4

## ğŸ“ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 

```
tests/
â”œâ”€â”€ unit/                    # ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ
â”‚   â”œâ”€â”€ client/             # ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ†ã‚¹ãƒˆ
â”‚   â”‚   â”œâ”€â”€ components/     # Reactã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚   â”‚   â””â”€â”€ ui/        # UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚   â””â”€â”€ utils.test.tsx  # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°
â”‚   â””â”€â”€ server/             # ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãƒ†ã‚¹ãƒˆ
â”‚       â”œâ”€â”€ basic.test.ts   # åŸºæœ¬æ©Ÿèƒ½
â”‚       â””â”€â”€ config.test.ts  # è¨­å®šç®¡ç†
â”œâ”€â”€ integration/            # çµ±åˆãƒ†ã‚¹ãƒˆ
â”‚   â”œâ”€â”€ api.test.ts        # APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
â”‚   â””â”€â”€ database.test.ts   # ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ“ä½œ
â”œâ”€â”€ e2e/                   # E2Eãƒ†ã‚¹ãƒˆï¼ˆå°†æ¥æ‹¡å¼µç”¨ï¼‰
â”œâ”€â”€ __fixtures__/          # ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿
â”‚   â””â”€â”€ testData.ts        # ãƒ¢ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿
â”œâ”€â”€ __mocks__/             # ãƒ¢ãƒƒã‚¯å®šç¾©
â”‚   â””â”€â”€ handlers.ts        # MSWãƒãƒ³ãƒ‰ãƒ©ãƒ¼
â”œâ”€â”€ utils/                 # ãƒ†ã‚¹ãƒˆãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â”‚   â””â”€â”€ testUtils.tsx      # ãƒ†ã‚¹ãƒˆãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°
â””â”€â”€ setup.ts              # ãƒ†ã‚¹ãƒˆç’°å¢ƒè¨­å®š
```

## ğŸš€ ãƒ†ã‚¹ãƒˆå®Ÿè¡Œã‚³ãƒãƒ³ãƒ‰

### åŸºæœ¬å®Ÿè¡Œ

```bash
# å…¨ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
npm test

# ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã®ã¿
npm run test:unit

# çµ±åˆãƒ†ã‚¹ãƒˆã®ã¿
npm run test:integration

# ã‚¦ã‚©ãƒƒãƒãƒ¢ãƒ¼ãƒ‰ï¼ˆé–‹ç™ºæ™‚ï¼‰
npm run test:watch

# ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ¬ãƒãƒ¼ãƒˆä»˜ã
npm run test:coverage

# ãƒ†ã‚¹ãƒˆUIï¼ˆãƒ–ãƒ©ã‚¦ã‚¶ã§çµæœè¡¨ç¤ºï¼‰
npm run test:ui
```

### å€‹åˆ¥å®Ÿè¡Œ

```bash
# ç‰¹å®šã®ãƒ•ã‚¡ã‚¤ãƒ«
npm test tests/unit/server/basic.test.ts

# ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒ
npm test button

# ç‰¹å®šã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹
npm test -- --reporter=verbose
```

## ğŸ“Š ç¾åœ¨ã®ãƒ†ã‚¹ãƒˆçŠ¶æ³

### âœ… å®Ÿè¡Œå¯èƒ½ãªãƒ†ã‚¹ãƒˆ

- **ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ**: 26ä»¶ âœ… å…¨ã¦æˆåŠŸ
- **çµ±åˆãƒ†ã‚¹ãƒˆ**: 25ä»¶ âœ… å…¨ã¦æˆåŠŸ
- **ã‚«ãƒãƒ¬ãƒƒã‚¸**: 1.06% ï¼ˆåˆæœŸè¨­å®šæ¸ˆã¿ï¼‰

### ğŸ§ª ãƒ†ã‚¹ãƒˆä¾‹

#### ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ
- ã‚µãƒ¼ãƒãƒ¼è¨­å®šæ¤œè¨¼
- ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°
- UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼ˆButtonï¼‰

#### çµ±åˆãƒ†ã‚¹ãƒˆ
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ“ä½œ
- API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

## ğŸ”§ è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«

### vitest.config.ts
```typescript
export default defineConfig({
  plugins: [react()],
  test: {
    globals: true,
    environment: "happy-dom",
    setupFiles: ["./tests/setup.ts"],
    coverage: {
      provider: "v8",
      reporter: ["text", "json", "html"],
    },
  },
  resolve: {
    alias: {
      "@": path.resolve(__dirname, "client", "src"),
      "@shared": path.resolve(__dirname, "shared"),
    },
  },
});
```

### ç’°å¢ƒå¤‰æ•° (.env.test)
```env
NODE_ENV=test
DATABASE_URL=postgresql://test:test@localhost:5432/tasktrackr_test
SESSION_SECRET=test_session_secret
AI_PROVIDER=test
```

## ğŸ¯ ãƒ†ã‚¹ãƒˆå“è³ªç›®æ¨™

| é …ç›® | ç¾åœ¨ | ç›®æ¨™ |
|------|------|------|
| ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ | 1.06% | 80%+ |
| ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ | 26ä»¶ | 200ä»¶+ |
| çµ±åˆãƒ†ã‚¹ãƒˆ | 25ä»¶ | 100ä»¶+ |
| E2Eãƒ†ã‚¹ãƒˆ | 0ä»¶ | 20ä»¶+ |

## ğŸ“ˆ ä»Šå¾Œã®æ‹¡å¼µè¨ˆç”»

### Phase 1: åŸºæœ¬æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ
- èªè¨¼ã‚·ã‚¹ãƒ†ãƒ ãƒ†ã‚¹ãƒˆ
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ“ä½œãƒ†ã‚¹ãƒˆ
- åŸºæœ¬UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ†ã‚¹ãƒˆ

### Phase 2: æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆæ‹¡å¼µ
- ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç®¡ç†æ©Ÿèƒ½
- é€±æ¬¡ãƒ¬ãƒãƒ¼ãƒˆæ©Ÿèƒ½
- AIçµ±åˆæ©Ÿèƒ½

### Phase 3: E2Eãƒ†ã‚¹ãƒˆå°å…¥
- Playwrightå°å…¥
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚·ãƒŠãƒªã‚ªãƒ†ã‚¹ãƒˆ
- ãƒ–ãƒ©ã‚¦ã‚¶é–“äº’æ›æ€§ãƒ†ã‚¹ãƒˆ

### Phase 4: ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ
- è² è·ãƒ†ã‚¹ãƒˆ
- ãƒ¬ã‚¹ãƒãƒ³ã‚¹æ™‚é–“æ¸¬å®š
- ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ç›£è¦–

## ğŸ› ãƒ†ã‚¹ãƒˆæ™‚ã®æ³¨æ„ç‚¹

### æ—¢çŸ¥ã®åˆ¶é™äº‹é …
- ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è„†å¼±æ€§ãŒ5ä»¶æ®‹å­˜ï¼ˆéã‚¯ãƒªãƒ†ã‚£ã‚«ãƒ«ï¼‰
- ç¾åœ¨ã®ã‚«ãƒãƒ¬ãƒƒã‚¸ã¯1.06%ï¼ˆãƒ†ã‚¹ãƒˆã‚¤ãƒ³ãƒ•ãƒ©æ§‹ç¯‰å®Œäº†æ®µéšï¼‰
- å®Ÿéš›ã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šãƒ†ã‚¹ãƒˆã¯æœªå®Ÿè£…

### ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

```bash
# ãƒ†ã‚¹ãƒˆãŒå¤±æ•—ã™ã‚‹å ´åˆ
npm test -- --reporter=verbose

# ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¯ãƒªã‚¢
npm test -- --run --clearCache

# ç‰¹å®šã®ç’°å¢ƒã§ãƒ†ã‚¹ãƒˆ
NODE_ENV=test npm test
```

## ğŸ”— CI/CDçµ±åˆ

GitHub Actionsãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ãŒè¨­å®šæ¸ˆã¿ï¼š
- ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆæ™‚ã®è‡ªå‹•ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
- Node.js 18.x, 20.x ã§ã®ãƒãƒˆãƒªãƒƒã‚¯ã‚¹ãƒ†ã‚¹ãƒˆ
- PostgreSQLãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚µãƒ¼ãƒ“ã‚¹
- ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ¬ãƒãƒ¼ãƒˆï¼ˆCodecové€£æºï¼‰

## ğŸ“š å‚è€ƒãƒªãƒ³ã‚¯

- [Vitest Documentation](https://vitest.dev/)
- [React Testing Library](https://testing-library.com/docs/react-testing-library/intro/)
- [MSW Documentation](https://mswjs.io/)
- [Happy DOM](https://github.com/capricorn86/happy-dom)

---

**æ³¨æ„**: ã“ã®ãƒ†ã‚¹ãƒˆã‚¤ãƒ³ãƒ•ãƒ©ã¯ç¾åœ¨åŸºç›¤ãŒå®Œæˆã—ãŸæ®µéšã§ã™ã€‚ä»Šå¾Œã€å®Ÿéš›ã®æ©Ÿèƒ½ã«å¯¾å¿œã—ãŸãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã‚’æ®µéšçš„ã«è¿½åŠ ã—ã¦ã„ãå¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚