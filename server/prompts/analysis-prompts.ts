import { ANALYSIS_FIELD_TYPES } from "@shared/ai-constants";

export const analysisPrompts: Record<string, string> = {
  [ANALYSIS_FIELD_TYPES.weeklyTasks]: `
【必須レイアウト】
■主な作業
■計画との差異（遅延・前倒し等）
■リスク評価
  評価: 大・中・小
  理由: [具体的な理由]

【記載例】
■主な作業
・システム設計書の作成（完了率80%）
・API実装（ユーザー認証機能完了）
・単体テスト実施（10件中8件完了）

■計画との差異
・設計書レビューで仕様変更が発生し、1日遅延
・API実装は想定より効率化でき、半日前倒し

■リスク評価
  評価: 中
  理由: 設計変更により結合テスト開始が遅れる可能性`,
  [ANALYSIS_FIELD_TYPES.delayDetails]: `
【必須レイアウト】
・具体的な遅延・問題点の詳細説明
・影響範囲と対応状況
・今後の対応計画

【記載例】
・データベース接続処理で予期しないエラーが発生
・影響範囲：ユーザー登録機能全般、テスト工程にも影響
・対応状況：原因特定済み、修正コード実装中
・今後の対応：明日中に修正完了予定、追加テスト2日間`,
[ANALYSIS_FIELD_TYPES.issues]: `
【必須レイアウト】
■内容
■深刻度
  評価: 大・中・小
  理由: [具体的な理由]
■対応状況

【記載例】
■内容
・外部APIのレスポンス時間が想定より遅く、ユーザビリティに影響

■深刻度
  評価: 中
  理由: ユーザー体験の悪化により、顧客満足度低下の可能性

■対応状況
・キャッシュ機能の実装を検討中
・来週までに対応策を決定し、実装開始予定`,
[ANALYSIS_FIELD_TYPES.changeDetails]: `
【必須レイアウト】
■変更された内容
■変更理由と影響
■リスク評価
  評価: 大・中・小
  理由: [具体的な理由]

【記載例】
■変更された内容
・ユーザー認証方式をセッション方式からJWT方式に変更

■変更理由と影響
・セキュリティ強化とスケーラビリティ向上のため
・フロントエンド側の認証処理も合わせて変更が必要

■リスク評価
  評価: 中
  理由: 既存機能への影響範囲が広く、テスト工数増加`,
  [ANALYSIS_FIELD_TYPES.nextWeekPlan]: `
【必須レイアウト】
■作業予定
■想定される懸念
■リスク評価
  評価: 大・中・小
  理由: [具体的な理由]

【記載例】
■作業予定
・結合テストの実施（3日間）
・性能テストの準備と実行（2日間）
・バグ修正と再テスト

■想定される懸念
・外部システムとの連携テストで不具合発生の可能性
・性能要件を満たさない場合の対応時間確保

■リスク評価
  評価: 中
  理由: テスト工程は不確定要素が多く、スケジュール調整が必要になる可能性`,
  [ANALYSIS_FIELD_TYPES.supportRequests]: `
【必須レイアウト】
・具体的な支援要請内容
・判断が必要な事項
・緊急度と理由

【記載例】
・データベース設計のレビュー支援をお願いします
・外部API選定について技術的判断が必要（A社 vs B社）
・緊急度：高（来週火曜日までに決定が必要、開発スケジュールへの影響大）`,
[ANALYSIS_FIELD_TYPES.resourceConcerns]: `
【必須レイアウト】
・具体的なリソース懸念の詳細説明
・影響範囲と対応状況
・今後の対応計画

【記載例】
・テスト専任者の不足により、テスト工程に遅延リスク
・影響範囲：結合テスト、性能テスト、受入テスト全般
・対応状況：他プロジェクトからの応援要請を検討中
・今後の対応：来週月曜日までに人員配置を確定`,
[ANALYSIS_FIELD_TYPES.customerConcerns]: `
【必須レイアウト】
・具体的な顧客状況の詳細説明
・顧客満足度や評価
・改善点や対応計画

【記載例】
・顧客からUI/UXについて「操作が分かりにくい」との指摘
・顧客満足度：現在7/10、目標8/10以上
・改善点：ナビゲーション改善、ヘルプ機能強化
・対応計画：来週UI改修着手、2週間後にユーザビリティテスト実施`,
[ANALYSIS_FIELD_TYPES.environmentConcerns]: `
【必須レイアウト】
・具体的な環境状況の詳細説明
・影響範囲と対応状況
・今後の対応計画

【記載例】
・開発環境のサーバー不安定により、作業効率低下
・影響範囲：開発チーム全体、テスト環境にも波及
・対応状況：インフラチームと連携し、原因調査中
・今後の対応：今週中にサーバー交換、来週から正常稼働予定`,
[ANALYSIS_FIELD_TYPES.costConcerns]: `
【必須レイアウト】
・具体的なコスト状況の詳細説明
・予算との差異分析
・今後の見込みと対策

【記載例】
・クラウドサービス利用料が予算を20%超過
・予算との差異：月額50万円の予算に対し、実績60万円
・原因：データ転送量が想定より多い
・今後の見込み：現状維持なら月10万円オーバー継続
・対策：データ圧縮機能実装、不要なデータ転送削減`,
[ANALYSIS_FIELD_TYPES.knowledgeConcerns]: `
【必須レイアウト】
・具体的なスキル状況の詳細説明
・影響範囲と対応状況
・今後の対応計画

【記載例】
・新技術（React）の習得が不十分で、開発効率低下
・影響範囲：フロントエンド開発全般、品質リスクも存在
・対応状況：オンライン研修受講中、先輩エンジニアからのレビュー強化
・今後の対応：来週まで集中学習、実装は段階的にレベルアップ`,
[ANALYSIS_FIELD_TYPES.trainingConcerns]: `
【必須レイアウト】
・具体的な教育状況の詳細説明
・影響範囲と対応状況
・今後の対応計画

【記載例】
・新入社員の技術習得が計画より遅れ気味
・影響範囲：チーム全体の生産性、教育担当者の負荷増
・対応状況：個別指導時間を増やし、基礎学習を強化
・今後の対応：来月から実践的な小規模タスクを担当、段階的にスキルアップ`,
[ANALYSIS_FIELD_TYPES.urgentIssues]: `
【必須レイアウト】
・具体的な緊急課題の詳細説明
・緊急度と影響範囲
・対応計画とタイムライン

【記載例】
・本番環境でデータ整合性エラーが発生
・緊急度：最高（サービス停止リスク）
・影響範囲：全ユーザー、データ信頼性に関わる問題
・対応計画：今日中に原因特定、明日朝までに修正適用
・タイムライン：調査完了→修正実装→テスト→本番適用`,
[ANALYSIS_FIELD_TYPES.businessOpportunities]: `
【必須レイアウト】
■顧客からの新たな要望、関心事
■今後の商談可能性
■市場動向・競合情報

【記載例】
■顧客からの新たな要望、関心事
・モバイルアプリ版の開発要望
・AI機能の追加への関心
・セキュリティ強化の要求

■今後の商談可能性
・追加開発案件：確度70%、来月提案予定
・保守契約延長：確度90%、条件交渉中

■市場動向・競合情報
・競合他社がAI機能を標準搭載開始
・市場全体でセキュリティ要求レベルが向上`,
[ANALYSIS_FIELD_TYPES.riskAnalysis]: `
【必須レイアウト】
・リスクの概要と対策が組み合わさった総合的な分析
・リスクの優先度と対応策の妥当性
・実行可能性と効果的な対策

【記載例】
・技術的リスク：新フレームワーク採用による学習コスト増
・スケジュールリスク：外部連携システムの仕様変更
・品質リスク：テスト工程の短縮による品質低下
・優先度：技術的リスク（高）、スケジュールリスク（中）、品質リスク（高）
・対応策：技術研修強化、外部ベンダーとの定期MTG、テスト自動化推進
・実行可能性：研修は実施済み、MTG体制構築中、自動化ツール導入検討`,
[ANALYSIS_FIELD_TYPES.qualityAnalysis]: `
【必須レイアウト】
・品質懸念事項と進捗状況の総合的な分析
・品質リスクと対応策の妥当性
・品質確保のための実行計画

【記載例】
・品質懸念：コードレビュー時間不足による潜在バグ
・進捗状況：単体テスト80%完了、結合テスト未着手
・品質リスク：リリース後のバグ発生率増加、顧客満足度低下
・対応策：レビュー体制強化、テスト工程前倒し、品質チェックリスト活用
・実行計画：来週からペアプログラミング導入、テスト自動化率向上`,
};

export const basePromptTemplate = `週次報告の「{{fieldName}}」フィールドの記載内容を正しいレイアウトで改善してください。複数トピックがある場合は目次を作成しトピックごとにまとめてください。

現在の記載内容:
{{content}}{{changeAnalysis}}

【分析目的】
正しいレイアウトで記載内容のレベルを上げることが目的です。

【分析指示】
1. 現在の記載内容が正しいレイアウトに準拠しているかチェックしてください
2. レイアウトに問題がある場合は、正しいレイアウトでの記載例を提示してください
3. 記載内容のレベルアップのため、より具体的で有用な内容への改善提案を行ってください{{layoutRequirements}}{{isContentUnchanged}}`;