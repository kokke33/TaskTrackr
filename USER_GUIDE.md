# TaskTrackr ユーザーガイド

## 📚 目次
1. [はじめに](#はじめに)
2. [基本操作](#基本操作)
3. [プロジェクト管理](#プロジェクト管理)
4. [案件管理](#案件管理)
5. [週次レポート](#週次レポート)
6. [AI機能の活用](#ai機能の活用)
7. [会議議事録](#会議議事録)
8. [検索機能](#検索機能)
9. [管理者機能](#管理者機能)
10. [技術仕様・既知の問題](#技術仕様既知の問題)
11. [トラブルシューティング](#トラブルシューティング)
12. [効率的な使い方のヒント](#効率的な使い方のヒント)

---

## はじめに

TaskTrackrは、プロジェクト・案件・週次レポートを効率的に管理し、AI機能で業務を自動化するWebアプリケーションです。

### 🎯 主な特徴
- **統合管理**: プロジェクト、案件、週次レポートの一元管理
- **AI支援**: 自動分析、議事録生成、改善提案、ストリーミング表示
- **検索機能**: 全文検索で情報を素早く発見
- **リアルタイム**: WebSocket通信による自動保存とリアルタイム更新
- **モバイル対応**: レスポンシブデザインでどこでもアクセス
- **包括的ログ**: Winston基盤のAI操作ログシステム

### 🔐 初回ログイン

#### 管理者アカウント
```
ユーザー名: admin
パスワード: adminpassword
権限: 管理者（システム全体の管理・AI設定・全プロジェクト管理）
```

#### 一般ユーザーアカウント
```
ユーザー名: ss7-1
パスワード: ss7-1weeklyreport
権限: 一般ユーザー（週次報告の作成・編集・AI分析）
```

**⚠️ セキュリティ重要**: 本番環境では初回ログイン後、必ずパスワードを強力なものに変更してください

---

## 基本操作

### ナビゲーション
- **ホーム**: ダッシュボードと最近の活動
- **プロジェクト**: プロジェクト一覧と管理
- **案件**: 案件一覧と管理
- **週次レポート**: レポート作成と閲覧
- **検索**: 全文検索機能

### 画面レイアウト
```
┌─────────────────────────────────────┐
│ ヘッダー（ナビゲーション・ユーザー） │
├─────────────────────────────────────┤
│                                     │
│           メインコンテンツ          │
│                                     │
├─────────────────────────────────────┤
│ フッター（バージョン情報・ヘルプ）   │
└─────────────────────────────────────┘
```

### キーボードショートカット
- `Ctrl + S`: 保存（週次レポート編集時）
- `Ctrl + F`: 検索（検索ページで）
- `Esc`: モーダル・ダイアログを閉じる

---

## プロジェクト管理

### 新規プロジェクト作成

1. **プロジェクト** → **新規作成** をクリック
2. 必要な情報を入力：
   - **プロジェクト名** *（必須）
   - **概要**: プロジェクトの目的と概要
   - **組織**: 関連組織・部署
   - **要員**: チーム構成と役割
   - **進捗**: 現在の進捗状況
   - **業務詳細**: 具体的な作業内容
   - **課題**: 現在抱えている課題
   - **ドキュメント**: 関連資料のリンクや説明
   - **引き継ぎ事項**: 重要な引き継ぎ情報
   - **備考**: その他の特記事項

3. **保存** をクリック

### プロジェクト編集
1. プロジェクト一覧で編集したいプロジェクトをクリック
2. **編集** ボタンをクリック
3. 情報を更新して **保存**

### プロジェクト削除
⚠️ **注意**: 削除は「ソフト削除」です。データは保持されます。
1. プロジェクト詳細画面で **削除** をクリック
2. 確認ダイアログで **削除確認**

---

## 案件管理

### 案件選択モーダル
TaskTrackrの案件選択は、使いやすいモーダル形式を採用しています。

```
┌─────── 案件選択ダイアログ ───────┐
│ ┌─ タブ ─────────────────────┐ │
│ │ プロジェクト別 │ 最近使用 │全案件 │ │
│ └───────────────────────────┘ │
│ ┌─ 検索バー ─────────────────┐ │
│ │ 🔍 案件名で検索...        │ │
│ └───────────────────────────┘ │
│ ┌─ 案件リスト ───────────────┐ │
│ │ 📁 プロジェクトA - 案件1   │ │
│ │ 📁 プロジェクトB - 案件2   │ │
│ │ 📁 プロジェクトC - 案件3   │ │
│ └───────────────────────────┘ │
│        [キャンセル] [選択]      │
└─────────────────────────────────┘
```

#### タブの使い分け
- **プロジェクト別**: プロジェクトごとにグループ化された案件
- **最近使用**: 最近操作した案件（履歴は自動保存）
- **全案件**: すべての案件を時系列で表示

### 新規案件作成
1. **案件** → **新規作成** をクリック
2. 案件情報を入力：
   - **プロジェクト名** *（必須）
   - **案件名** *（必須）
   - **説明**: 案件の詳細説明
   - **マイルストーン**: 重要な節目
   - **進捗分析を含める**: AI分析を有効にする

3. **保存** をクリック

---

## 週次レポート

### 📝 週次レポート作成の流れ

#### ステップ1: 案件選択
1. **週次レポート** → **新規作成** をクリック
2. 案件選択モーダルで対象案件を選択

#### ステップ2: 基本情報入力
- **週開始日**: 対象週の月曜日を選択
- **案件**: 選択済み案件が表示

#### ステップ3: タスク詳細入力
週次レポートには以下のセクションがあります：

**📊 進捗情報**
- **進捗概要**: 今週の全体的な進捗状況
- **完了したタスク**: 完了した作業の詳細
- **進行中のタスク**: 現在進行中の作業
- **予定しているタスク**: 来週以降の予定

**⚠️ 課題と成果**
- **課題**: 発生した問題や懸念事項
- **成果**: 達成した成果や改善点
- **来週の計画**: 次週の具体的な計画

**🤝 コミュニケーション**
- **クライアントとのコミュニケーション**: 顧客との連絡内容
- **ステークホルダーフィードバック**: 関係者からの意見

**📈 分析情報**
- **リスク評価**: 想定されるリスクと対策
- **品質指標**: 品質に関する定量的な指標
- **リソース活用状況**: 人的・物的リソースの使用状況
- **学んだ教訓**: 今週の気づきや学び
- **改善アクション**: 具体的な改善施策

### 🤖 AI機能の自動実行

#### フィールド単位でのAI分析
各テキストフィールドには**AI分析ボタン**が表示されます：

```
┌─ 進捗概要 ────────────────────────┐
│ 今週は新機能の開発を完了し...    │
│                                  │
└──────────────────────────────────┘
ℹ️ 🤖 [AI分析]
```

**分析タイミング**:
1. **初回分析**: フィールド入力後のフォーカス離脱時に自動実行
2. **手動分析**: AIボタンクリックで任意のタイミングで再実行

**AI分析結果の表示**:
```
┌─ AI分析結果 ─────────────────────┐
│ ✅ 良い点:                       │
│ • 計画通りの進捗を維持            │
│ • 品質基準を満たした開発          │
│                                  │
│ ⚠️ 改善点:                       │
│ • テストカバレッジの向上が必要    │
│ • ドキュメント更新の遅れ          │
│                                  │
│ 💡 提案:                         │
│ • ユニットテストの追加実装        │
│ • 週次でのドキュメント更新ルール  │
└──────────────────────────────────┘
```

### 💾 自動保存機能（WebSocket通信）
- **デバウンス**: 入力停止後2秒で自動保存
- **保存インジケーター**: 画面上部に保存状態表示
- **WebSocket通信**: リアルタイムでの保存状態同期
- **競合処理**: 他ユーザーとの同時編集を検出・警告
- **接続監視**: WebSocket接続状況の自動監視・復旧

#### 保存状態の表示
```
💾 保存済み     - 正常に保存完了
⏳ 保存中...    - WebSocket経由で保存処理中
❌ 保存失敗     - 接続エラーまたは保存エラー
🔄 再接続中...  - WebSocket接続の復旧中
```

### 📖 前回レポートとの比較
```
ℹ️ 情報アイコンにマウスオーバーすると：

┌─ 前回報告内容 ───────────────────┐
│ 前回報告内容                     │
│ ┌─────────────────────────────┐ │
│ │ 新機能の設計を開始し、基本的  │ │
│ │ な仕様策定を完了しました。    │ │
│ │ 次週から実装作業に着手予定    │ │
│ │ です。                        │ │
│ └─────────────────────────────┘ │
└──────────────────────────────────┘
```

---

## AI機能の活用

### 🧠 対応AIプロバイダー
TaskTrackrは5つのAIプロバイダーに対応：

| プロバイダー | 特徴 | ストリーミング | 推奨用途 |
|-------------|------|-------------|----------|
| **OpenAI** | 高精度、幅広い知識 | ✅ 対応 | 詳細分析、要約 |
| **Google Gemini** | 高速、コストパフォーマンス | ✅ 対応 | リアルタイム分析 |
| **Groq** | 超高速レスポンス | ❌ 非対応 | 即座の分析が必要な場面 |
| **Ollama** | ローカル実行、プライバシー | ❌ 非対応 | 機密情報の分析 |
| **OpenRouter** | 多様なモデル選択 | ❌ 非対応 | 用途別の最適化 |

#### 🎯 ストリーミング分析について
**OpenAI** と **Google Gemini** では、AI分析結果がリアルタイムで表示されます：
```
AI分析中...
✅ 良い点: 計画通りの進捗を維持...
⚠️ 改善点: テストカバレッジの向上が...
💡 提案: ユニットテストの追加実装...
[完了]
```

### 🔧 AI設定の変更
**管理者のみ**: システム設定でAIプロバイダーを切り替え可能

1. **管理者設定** → **システム設定**
2. **リアルタイムプロバイダー** で使用するAIを選択
3. **保存** をクリック

### 📄 AI分析の種類

#### 1. 進捗分析
```
入力例: "新機能の開発を80%完了。テストで2件のバグを発見。"

AI分析結果:
✅ 進捗状況: 順調（80%完了）
⚠️ 品質課題: バグ検出（要対応）
💡 提案: 残り20%でバグ修正とテスト強化を並行実施
```

#### 2. リスク評価
```
入力例: "要員の一時離脱により作業が遅延気味"

AI分析結果:
🚨 リスク: 高（要員不足）
📊 影響度: スケジュール遅延リスク
🛡️ 対策案: 
• 他プロジェクトからの一時応援
• タスクの優先度再評価
• 外部リソース活用の検討
```

#### 3. 改善提案
```
入力例: "コードレビューに時間がかかっている"

AI分析結果:
🔍 課題: プロセス効率性
💡 改善案:
• レビューチェックリストの導入
• 小さな単位でのレビュー実施
• 自動化ツールの活用検討
```

---

## 会議議事録

### 📅 週次レポート会議
週次レポートに紐づいた会議議事録を作成できます。

#### 議事録作成手順
1. 週次レポート詳細画面で **会議議事録** セクションを確認
2. **新規作成** または **編集** をクリック
3. 会議情報を入力：
   - **会議日時**
   - **参加者**
   - **議題**
   - **決定事項**
   - **アクションアイテム**
   - **次回会議予定**

### 🤖 AI議事録生成
**管理者機能**: 週次レポートの内容から自動で議事録案を生成

### 📧 管理者確認メール自動生成
週次レポート作成時に、管理者向けの確認メールが自動生成されます：

#### 自動生成タイミング
- 新規週次レポート保存時に自動実行
- レポート内容を基にした詳細確認メールを作成

#### メール再生成機能
1. 週次レポート詳細画面で **管理者メール** セクションを確認
2. **メール再生成** ボタンをクリック
3. 最新のレポート内容を反映した確認メールが生成

```
AI生成例:
┌─ 自動生成された議事録案 ─────────┐
│ 📅 会議日時: 2024年1月5日 10:00  │
│ 👥 参加者: PM、開発チーム、QA    │
│                                  │
│ 📋 主な議題:                     │
│ • 進捗状況の確認                 │
│ • 発見されたバグの対応           │
│ • 来週の作業計画                 │
│                                  │
│ ✅ 決定事項:                     │
│ • バグ修正を最優先で実施         │
│ • テストケースの追加実装         │
│                                  │
│ 📝 アクションアイテム:           │
│ • バグ修正完了: 1/8まで          │
│ • テスト強化: 1/10まで           │
└──────────────────────────────────┘
```

---

## 検索機能

### 🔍 全文検索
TaskTrackrは強力な全文検索機能を提供します。

#### 検索対象
- **プロジェクト**: 名前、概要、すべてのフィールド
- **案件**: プロジェクト名、案件名、説明
- **週次レポート**: すべてのテキストフィールド

#### 検索の使い方
1. ヘッダーの検索ボックスに検索語を入力
2. **Enter** キーまたは **検索** ボタンをクリック
3. 結果が種類別（プロジェクト・案件・レポート）に表示

#### 検索のコツ
```
✅ 効果的な検索例:
• "API開発" - 複数単語での検索
• "バグ修正" - 問題に関する情報
• "パフォーマンス改善" - 特定のテーマ

⚠️ 注意:
• 結果は最大20件に制限されます
• より具体的なキーワードで絞り込みを推奨
```

### 🏷️ 絞り込み機能
検索結果ページでさらに絞り込み可能：
- **期間**: 特定の期間内の結果のみ
- **プロジェクト**: 特定プロジェクトの結果のみ
- **作成者**: 特定ユーザーが作成したもののみ

---

## 管理者機能

### 👑 管理者権限
管理者は以下の追加機能にアクセスできます：

#### システム設定
- **AIプロバイダー設定**: 使用するAIサービスの切り替え
- **ログレベル設定**: システムログの詳細度調整
- **機能有効/無効**: 特定機能のオン/オフ切り替え

#### ユーザー管理
```
┌─ ユーザー管理画面 ───────────────┐
│ ユーザー一覧                     │
│ ┌─────────────────────────────┐ │
│ │ admin (管理者)    [編集][削除] │ │
│ │ user1 (一般)      [編集][削除] │ │
│ │ user2 (一般)      [編集][削除] │ │
│ └─────────────────────────────┘ │
│              [新規ユーザー作成]   │
└──────────────────────────────────┘
```

#### 新規ユーザー作成
1. **管理者設定** → **ユーザー管理**
2. **新規ユーザー作成** をクリック
3. ユーザー情報を入力：
   - **ユーザー名** *（必須）
   - **パスワード** *（必須）
   - **管理者権限**: チェックで管理者に設定

### 📊 システム監視
管理者は以下の情報を監視できます：
- **AI使用状況**: APIリクエスト数、エラー率、プロバイダー別統計
- **ユーザー活動**: ログイン履歴、操作ログ
- **システム性能**: レスポンス時間、エラー発生状況
- **WebSocket接続**: リアルタイム通信の状態監視

### 🧪 開発・テスト環境
システムには包括的なテストインフラが構築されています：

#### テスト構成（51テスト）
- **ユニットテスト**: 26テスト（フロントエンド・バックエンド）
- **統合テスト**: 25テスト（API・データベース・認証）
- **テストフレームワーク**: Vitest 3.2.4 + React Testing Library + MSW

#### 品質保証
- **型チェック**: TypeScriptによる静的解析
- **自動テスト**: CI/CDパイプライン統合
- **カバレッジ計測**: コードカバレッジレポート生成
- **Happy DOM**: 高速なDOM環境でのテスト実行

---

## 🔧 技術仕様・既知の問題

### 🏗️ システムアーキテクチャ
- **統合サーバー設計**: Express単一サーバーでフロントエンド・バックエンド統合運用
- **ビルドシステム**: Viteフロントエンド + ESBuildバックエンド
- **データベース**: Drizzle ORM + PostgreSQL（Neon.tech対応）
- **セッション管理**: PostgreSQL ↔ MemoryStore自動切替

### ⚠️ 既知の問題（2025年1月時点）

#### TypeScript型エラー
以下のフォームバリュー型エラーが現在発生中：
```
❌ client/src/pages/weekly-report.tsx 
   - Textareaコンポーネントが null 値を受信

❌ server/routes.ts
   - Userオブジェクトプロパティアクセスの問題
```

**回避策**: 
- フォームフィールドで `value={field.value ?? ""}` パターンを使用
- データベースフィールドはnullable定義だが、Reactコンポーネントは非null期待値の不整合

#### 解決確認方法
```bash
# 型チェック実行（開発者向け）
npm run check
```

### 🔄 統合サーバー仕様
- **開発モード**: `localhost:5000` で統合サーバー起動
- **フロントエンド出力**: `dist/public/` ディレクトリ
- **バックエンド出力**: `dist/index.js` ファイル
- **個別起動不可**: フロントエンド・バックエンド個別起動コマンドは存在しません

---

## トラブルシューティング

### ❗ よくある問題と解決方法

#### 1. ログインできない
**症状**: ユーザー名・パスワードが正しいのにログインエラー

**解決方法**:
```
□ ブラウザのCookieを確認・削除
□ ブラウザを再起動
□ 管理者にユーザー情報の確認を依頼
□ パスワードリセットの実施
```

#### 2. 自動保存が動作しない
**症状**: 週次レポートの内容が保存されない

**解決方法**:
```
□ インターネット接続を確認
□ ブラウザの JavaScript が有効か確認
□ ページを再読み込み（Ctrl + F5）
□ 別のブラウザで試行
```

#### 3. AI分析が実行されない
**症状**: AIボタンをクリックしても分析結果が表示されない

**解決方法**:
```
□ AI設定が正しく構成されているか管理者に確認
□ インターネット接続を確認（外部AIの場合）
□ ブラウザの開発者ツールでエラーを確認
□ 管理者にAIログの確認を依頼
□ ストリーミング対応プロバイダー（OpenAI/Gemini）を試す
□ AIプロバイダー切り替え（Groq/Ollama/OpenRouter）
```

#### 6. WebSocket接続の問題
**症状**: リアルタイム保存や接続インジケーターが動作しない

**解決方法**:
```
□ ブラウザがWebSocketに対応しているか確認
□ ファイアウォールやプロキシ設定を確認
□ ページを再読み込み（WebSocket接続リセット）
□ ブラウザの開発者ツールでWebSocketエラーを確認
□ 管理者にサーバーログの確認を依頼
```

#### 7. ストリーミング分析が途切れる
**症状**: AI分析結果が途中で停止する

**解決方法**:
```
□ インターネット接続の安定性を確認
□ 異なるAIプロバイダーで試行（OpenAI ↔ Gemini）
□ 非ストリーミングプロバイダーに切り替え（Groq/Ollama）
□ 分析対象テキストの長さを短くして試行
□ 管理者にAIプロバイダーの使用制限を確認
```

#### 4. 検索結果が表示されない
**症状**: 検索しても結果が0件

**解決方法**:
```
□ 検索キーワードを変更（より一般的な用語）
□ 複数のキーワードで検索
□ データが実際に存在するか確認
□ 検索対象の期間を拡大
```

#### 5. 画面表示が崩れる
**症状**: レイアウトが正しく表示されない

**解決方法**:
```
□ ブラウザの拡大/縮小設定を確認（100%推奨）
□ ブラウザキャッシュをクリア
□ 対応ブラウザで再試行
   ✅ Chrome 90+
   ✅ Firefox 88+
   ✅ Safari 14+
   ✅ Edge 90+
```

### 🔧 ブラウザ設定の確認

#### Cookieの有効化
TaskTrackrはセッション管理にCookieを使用します：
```
Chrome: 設定 → プライバシーとセキュリティ → Cookie → 有効
Firefox: 設定 → プライバシーとセキュリティ → Cookie → 有効
Safari: 環境設定 → プライバシー → Cookie → 有効
```

#### JavaScriptの有効化
```
Chrome: 設定 → プライバシーとセキュリティ → サイトの設定 → JavaScript → 許可
Firefox: 設定 → プライバシーとセキュリティ → アクセス許可 → JavaScript → 有効
```

### 📞 サポート連絡先

**技術的な問題**:
1. まず本ガイドのトラブルシューティングを確認
2. ブラウザの開発者ツール（F12）でエラーメッセージを確認
3. エラーメッセージと発生手順を記録
4. システム管理者または開発チームに連絡

**機能要望・改善提案**:
- GitHubのIssues機能を利用
- 具体的な用途と期待する動作を明記

---

## 💡 効率的な使い方のヒント

### ⚡ 時短テクニック
1. **最近使用タブの活用**: 案件選択時は「最近使用」タブから素早く選択
2. **AI分析の活用**: 初回入力時の自動分析で記入漏れを防止
3. **ストリーミング分析**: OpenAI/Gemini使用時のリアルタイム結果表示を活用
4. **検索の活用**: 過去のレポートから参考情報を素早く発見
5. **WebSocket自動保存の信頼**: こまめな手動保存は不要（自動保存が動作）
6. **管理者確認メール**: 週次レポート作成時の自動生成メール活用

### 📝 レポート作成のベストプラクティス
1. **具体的な記述**: 「順調」ではなく「80%完了、予定通り」
2. **数値の活用**: 「多い」ではなく「15件のバグを発見」
3. **次週への連携**: 来週の作業者が理解できる詳細度
4. **AI提案の活用**: 分析結果を参考に内容を充実

### 🎯 プロジェクト管理のコツ
1. **定期更新**: 週次でプロジェクト情報を最新化
2. **課題の早期記録**: 小さな課題も記録して追跡
3. **ドキュメントリンク**: 関連資料は常にリンクを更新
4. **チーム共有**: 重要な情報は関係者全員が閲覧可能に

---

このユーザーガイドは継続的に更新されます。新機能の追加や改善に合わせて、最新の使い方を確認してください。

ご質問やご不明な点がございましたら、お気軽にお問い合わせください。